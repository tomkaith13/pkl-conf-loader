import "base.pkl"
doc_confs = new Mapping {
    ["test"] = new Mapping {
        ["cap1"] {
            configs = new Listing{
            new base.ConfigElem {
                name = "PRE_PROCESS"
                val = true
                type = "boolean"
            }
            new base.ConfigElem {
                name = "DOC_MAX_SIZE"
                val = 80.mib
                type = "size"
            }
            new base.ConfigElem {
                name = "DOC_MIMES"
                val = "pdf,docx,jpg,heic"
                type = "csv"
            }
            new base.ConfigElem {
                name = "doc_timeout"
                val = 15.min
                type = "duration"
            }
            }
        }
        ["cap2"] {
            configs = new Listing {
            new  base.ConfigElem {
                name = "PRE_PROCESS"
                val = true
                type = "boolean"
            }
            new  base.ConfigElem {
                name = "DOC_MAX_SIZE"
                val = 20.mib
                type = "size"
            }
            new  base.ConfigElem {
                name = "DOC_MIMES"
                val = "pdf,docx,jpg,heic"
                type = "csv"
            }
            }
        }
    }
}

// Convertors for json rendering of Datasize and Duration
output {
  renderer = new JsonRenderer {
    converters {
      [DataSize] = (size) -> "\(size.value)\(size.unit)"
      [Duration] = (dur) -> "\(dur.value)\(dur.unit)"
    }
  }
}